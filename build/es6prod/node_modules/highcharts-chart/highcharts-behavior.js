define(["exports","../@polymer/polymer/lib/utils/async.js","../highcharts/highstock.js","../highcharts/highcharts-more.js"],function(_exports,async,_highstock,_highchartsMore){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.HighchartsPolymer=void 0;async=babelHelpers.interopRequireWildcard(async);Highcharts.setOptions({global:{useUTC:!1}});const _extends=(...a)=>Object.assign({},...a),HighchartsPolymer={/* @polymerMixin */BaseBehavior:superClass=>{const newObj=_=>({}),newArr=_=>[];return class extends superClass{constructor(){super();this.__lateBindCallbacks=_extends({},this.__lateBindCallbacks,{_updateType:1,_loadingUpdate:1})}static get properties(){return{type:{type:String,observer:"_updateType"},title:{type:String,value:"",observer:"_titleUpdate"},subtitle:{type:String,observer:"_subtitleUpdate"},colorByPoint:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_cbpUpdate"},credits:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_creditsUpdate"},legend:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_legendUpdate"},chartOptions:{type:Object,value:newObj,observer:"_chartUpdate"},plotOptions:{type:Object,value:newObj,observer:"_plotUpdate"},xAxis:{type:Object,value:newObj,observer:"_xAxisUpdate"},yAxis:{type:Object,value:newObj,observer:"_yAxisUpdate"},xLabel:{type:String,value:"",observer:"_xAxisTitleUpdate"},yLabel:{type:String,value:"",observer:"_yAxisTitleUpdate"},label:{type:String,value:"",observer:"_labelUpdate"},data:{type:Array,value:newArr,observer:"_dataUpdate"},export:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_exportingUpdate"},xZoom:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_zoomUpdate"},yZoom:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_zoomUpdate"},loading:{type:Boolean,value:!1,observer:"_loadingUpdate",reflectToAttribute:!0},loadingMessage:{type:String,value:""},renderer:{type:Object,computed:"_getRenderer(_chart.renderer)"},//Custom Chart Declarations
legendOptions:{type:Object,value:newObj,observer:"_legendOptionsUpdate"},tooltipOptions:{type:Object,value:newObj,observer:"_tooltipOptionsUpdate"},highchartOptions:{type:Object,value:newObj,observer:"_hcUpdate"},_chart:{type:Object,readOnly:!0},__microTaskDelaySetData:{type:Number,value:25}}}__createChart(namespace){var xAxis=_extends(this.vsTime?{type:"datetime",tickPixelInterval:150}:{},this.xAxis,{title:{text:this._getAxisLabel("X")}}),yAxis=_extends(this.yAxis,{title:{text:this._getAxisLabel("Y")}}),Series=this.data.length&&this.data[0].data instanceof Array?this.data:[{name:this.label||this.yLabel||this.xLabel,colorByPoint:this.colorByPoint,data:this.data}],__app=this;this._set_chart(new Highcharts[namespace||"Chart"](_extends(!0,{},{chart:_extends({renderTo:__app.$.Chart,defaultSeriesType:this.type,animation:Highcharts.svg,// don't animate in old IE
marginRight:10,events:{click:function(e){__app._fire("chart-click",{e:e,chart:this,component:__app})},load:function(e){__app._fire("chart-load",{e:e,chart:this,component:__app})},beforePrint:function(e){__app._fire("before-print",{e:e,chart:this,component:__app})},afterPrint:function(e){__app._fire("after-print",{e:e,chart:this,component:__app})},addSeries:function(e){__app._fire("series-added",{e:e,chart:this,component:__app})},drilldown:function(e){__app._fire("drill-down",{e:e,chart:this,component:__app})},drillup:function(e){__app._fire("drill-up",{e:e,chart:this,component:__app})},drillupall:function(e){__app._fire("drill-up-all",{e:e,chart:this,component:__app})},selection:function(e){__app._fire("selection",{e:e,chart:this,component:__app})},redraw:function(e){__app._fire("redraw",{e:e,chart:this,component:__app})},render:function(e){__app._fire("render",{e:e,chart:this,component:__app})}}},this.xZoom||this.yZoom?{zoomType:(this.xZoom&&"x")+(this.yZoom&&"y")}:{},this.chartOptions),//Properties
title:{text:this.title},subtitle:{text:this.subtitle},xAxis:xAxis,yAxis:yAxis,credits:{enabled:this.credits},plotOptions:_extends({pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:(Highcharts.theme||[]).contrastTextColor||"black"}}}},this.plotOptions),tooltip:_extends(this.vsTime?{formatter:_=>`<b>${this.series.name}</b><br>`+Highcharts.dateFormat("%Y-%m-%d %H:%M:%S",this.x)+"<br>"+Highcharts.numberFormat(this.y,2)}:{},this.tooltipOptions),legend:_extends({enabled:this.legend},this.legendOptions),exporting:{enabled:this.export},series:Series,drilldown:{series:[]}},this.highchartOptions)));setTimeout(_=>this.resizeChart(),50);setTimeout(_=>this.__lateBinders(),50)}setData(x,z){const __app=this,isArr=x instanceof Array;if(!isArr){x=_extends({name:this.label||this.yLabel||this.xLabel,colorByPoint:this.colorByPoint},x)}if(x&&x.length&&x[0].data instanceof Array){async.microTask.run(_=>{while(__app._chart.series.length){__app.removeSeries(0,!1)}x.forEach(d=>__app._chart.addSeries(d))},__app.__microTaskDelaySetData)}else{__app._getSeries(z)[isArr?"setData":"update"](x)}}addData(x,y,z,drillable){this.pushData(x,y,z,!0,drillable)}pushData(x,y,z,append,drillable){if("boolean"==typeof z){drillable=z;z=0}this._getSeries(z).addPoint(drillable?{name:x,y:y,drilldown:!0}:[x,y],!0,!append)}addSeries(name,data,colorByPoint,otherOptions){this._chart.addSeries(_extends({name:name,data:data||[],colorByPoint:"undefined"==typeof colorByPoint?this.colorByPoint:colorByPoint},"object"==typeof otherOptions?otherOptions:{}),!0)}addDrillSeries(point,data,name){this._chart.addSeriesAsDrilldown(point,{name:name,data:data})}removeSeries(z,redraw){const s=this._getSeries(z);s.remove(redraw);return s}updateSeries(k,v,z){let NewEl={};if("object"==typeof k){NewEl=k;z=v||z}else{NewEl[k]=v};this._getSeries(z).update(NewEl)}resizeChart(){if(!this._chart){return}this._chart.reflow()}resizeChartFixed(){if(!this._chart){return}this._chart.setSize(this.$.Chart.offsetWidth,this.offsetHeight)}reRender(){if(!this._chart){return}this._set_chart(new Highcharts.Chart(this._chart.options));this.setData(this.data);this.__lateBinders()}downloadAs(name,otherOptions){if(!this._chart){return}this._chart.exportChart(_extends({filename:name},otherOptions))}destroy(){if(!this._chart){return}this._chart.destroy()}showLoading(d){this.loadingMessage=d;this.loading=!0}zoomOut(){if(!this._chart){return};this._chart.zoomOut()}getSeries(z){return this._getSeries(z)}_getSeries(z){if(!this._chart){return this._returnDummySeries()};z="number"!=typeof z?0:z;const s=this._chart.series;if(!s.length){this._warn("Chart is empty [no series]");return this._returnDummySeries()};if(z<s.length){return s[z||0]}else{this._warn("Index z out of bounds");return this._returnDummySeries()}}_dataUpdate(d){this.setData(d.slice?d.slice(0):d)}_warn(err,c){console.warn("%c[highcharts-chart"+(c?"::"+c:"")+"]","font-weight:bold;background-color:yellow",err)}_creditsUpdate(c){if(!this._chart){return};this._chart.update({credits:{enabled:c}})}_legendUpdate(s){if(!this._chart){return};this._chart.legend.update({enabled:s})}_legendOptionsUpdate(o){if(!this._chart){return};this._chart.legend.update(o)}_tooltipOptionsUpdate(o){if(!this._chart){return};this._chart.tooltip.update(o)}_plotUpdate(o){if(!this._chart){return};this._chart.update({plotOptions:o})}_chartUpdate(o){if(!this._chart){return};Object.keys(o||{}).length&&this._warn("Not doing what you wanted, maybe you meant plotOptions?","chartOptions");this._chart.update({chart:o})}_exportingUpdate(x){if(!this._chart){return};this._chart.update({exporting:{enabled:x}})}_updateType(){if(!this.type){return};this.updateSeries("type",this.type)}_cbpUpdate(){this.updateSeries("colorByPoint",this.colorByPoint)}_xAxisUpdate(){if(!this._chart){return};this._chart.xAxis[0].update(this.xAxis)}_yAxisUpdate(){if(!this._chart){return};this._chart.yAxis[0].update(this.yAxis)}_zoomUpdate(){if(!this._chart){return};this._chart.update({chart:{zoomType:""+(this.xZoom?"x":"")+(this.yZoom?"y":"")}})}_xAxisTitleUpdate(){if(!this._chart){return};this._chart.xAxis[0].update({title:{text:this._getAxisLabel("X")}})}_yAxisTitleUpdate(){if(!this._chart){return};this._chart.yAxis[0].update({title:{text:this._getAxisLabel("Y")}})}_labelUpdate(){if(!this._chart){return};this._xAxisTitleUpdate();this._yAxisTitleUpdate()}_titleUpdate(){if(!this._chart){return};this._chart.setTitle({text:this.title})}_loadingUpdate(){if(!this._chart){return};this._chart[(this.loading?"show":"hide")+"Loading"](this.loadingMessage)}_subtitleUpdate(){if(!this._chart){return};this._chart.setTitle(null,{text:this.subtitle})}_hcUpdate(o){if(!this._chart){return};this._chart.update(o)}_getRenderer(){if(!this._chart){return};return this._chart.renderer}//Other Bindings
_getAxisLabel(dim){let l=dim.toLowerCase(),u=dim.toUpperCase(),lab=this[l+"Label"]||this.label;if(lab==u+"-Axis"){lab=this.label||lab};return lab.trim()}_returnDummySeries(){const f=function(){};return{isDummy:!0,setData:f,addPoint:f,update:f,remove:f}}__lateBinders(){const me=this;Object.keys(this.__lateBindCallbacks||{}).forEach(function(cb){me[cb]()})}__addLateBinder(cb){if(!(cb instanceof Array)){cb=[cb]};if(!this.__lateBindCallbacks){this.__lateBindCallbacks={}};const me=this;cb.forEach(function(c){me.__lateBindCallbacks[c]=1})}/* Need to define a local fire method here as it is not present in Polymer 2 */_fire(eventName,detail){this.dispatchEvent(new CustomEvent(eventName,{bubbles:!0,composed:!0,detail:detail}))}}},/* @polymerMixin */ChartBehavior:superClass=>{return class extends superClass{constructor(){super();this.__addLateBinder("_vsTimeUpdate")}static get properties(){return{vsTime:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_vsTimeUpdate"},selected:{type:Boolean,value:!1,readOnly:!0,notify:!0,reflectToAttribute:!0},selectedPoints:{type:Array,readOnly:!0,notify:!0}}}_vsTimeUpdate(a){if(!this._chart||"undefined"==typeof a){return};this.destroy();this.ready()}_checkSelected(){if(!this._chart){return};var points=this._chart.getSelectedPoints();this._setSelected(!!points.length);this._setSelectedPoints(points)}}}};_exports.HighchartsPolymer=HighchartsPolymer});